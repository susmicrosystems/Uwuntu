#include <libdbg.h>
#include <stdlib.h>
#include <errno.h>

static const struct dbg_errno errnos[] =
{
#define ERRNO_DEF(name) [name] = {#name}
	ERRNO_DEF(E2BIG),
	ERRNO_DEF(EACCES),
	ERRNO_DEF(EADDRINUSE),
	ERRNO_DEF(EAFNOSUPPORT),
	ERRNO_DEF(EAGAIN),
	ERRNO_DEF(EALREADY),
	ERRNO_DEF(EBADF),
	ERRNO_DEF(EBADMSG),
	ERRNO_DEF(EBUSY),
	ERRNO_DEF(ECANCELED),
	ERRNO_DEF(ECHILD),
	ERRNO_DEF(ECONNABORTED),
	ERRNO_DEF(ECONNREFUSED),
	ERRNO_DEF(ECONNRESET),
	ERRNO_DEF(EDEADLK),
	ERRNO_DEF(EDESTADDRREQ),
	ERRNO_DEF(EDOM),
	ERRNO_DEF(EDQUOT),
	ERRNO_DEF(EEXIST),
	ERRNO_DEF(EFAULT),
	ERRNO_DEF(EFBIG),
	ERRNO_DEF(EHOSTUNREACH),
	ERRNO_DEF(EIDRM),
	ERRNO_DEF(EILSEQ),
	ERRNO_DEF(EINPROGRESS),
	ERRNO_DEF(EINTR),
	ERRNO_DEF(EINVAL),
	ERRNO_DEF(EIO),
	ERRNO_DEF(EISCONN),
	ERRNO_DEF(EISDIR),
	ERRNO_DEF(ELOOP),
	ERRNO_DEF(EMFILE),
	ERRNO_DEF(EMLINK),
	ERRNO_DEF(EMSGSIZE),
	ERRNO_DEF(EMULTIHOP),
	ERRNO_DEF(ENAMETOOLONG),
	ERRNO_DEF(ENETDOWN),
	ERRNO_DEF(ENETRESET),
	ERRNO_DEF(ENETUNREACH),
	ERRNO_DEF(ENFILE),
	ERRNO_DEF(ENOBUFS),
	ERRNO_DEF(ENODATA),
	ERRNO_DEF(ENODEV),
	ERRNO_DEF(ENOENT),
	ERRNO_DEF(ENOEXEC),
	ERRNO_DEF(ENOLCK),
	ERRNO_DEF(ENOLINK),
	ERRNO_DEF(ENOMEM),
	ERRNO_DEF(ENOMSG),
	ERRNO_DEF(ENOPROTOOPT),
	ERRNO_DEF(ENOSPC),
	ERRNO_DEF(ENOSR),
	ERRNO_DEF(ENOSTR),
	ERRNO_DEF(ENOSYS),
	ERRNO_DEF(ENOTCONN),
	ERRNO_DEF(ENOTDIR),
	ERRNO_DEF(ENOTEMPTY),
	ERRNO_DEF(ENOTRECOVERABLE),
	ERRNO_DEF(ENOTSOCK),
	ERRNO_DEF(ENOTTY),
	ERRNO_DEF(ENXIO),
	ERRNO_DEF(EOPNOTSUPP),
	ERRNO_DEF(EOVERFLOW),
	ERRNO_DEF(EOWNERDEAD),
	ERRNO_DEF(EPERM),
	ERRNO_DEF(EPIPE),
	ERRNO_DEF(EPROTO),
	ERRNO_DEF(EPROTONOSUPPORT),
	ERRNO_DEF(EPROTOTYPE),
	ERRNO_DEF(ERANGE),
	ERRNO_DEF(EROFS),
	ERRNO_DEF(ESPIPE),
	ERRNO_DEF(ESRCH),
	ERRNO_DEF(ESTALE),
	ERRNO_DEF(ETIME),
	ERRNO_DEF(ETIMEDOUT),
	ERRNO_DEF(ETXTBSY),
	ERRNO_DEF(EXDEV),
#undef ERRNO_DEF
};

const struct dbg_errno *dbg_errno_get(int err)
{
	if (err < 0
	 || (unsigned)err >= sizeof(errnos) / sizeof(*errnos)
	 || !errnos[err].name[0])
		return NULL;
	return &errnos[err];
}
